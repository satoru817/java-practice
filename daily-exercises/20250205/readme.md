ã¯ã„ã€åŸºæœ¬çš„ãªæ–‡å­—åˆ—æ“ä½œã®å•é¡Œã‚’å‡ºã—ã¾ã™ã€‚å•†å“ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã«é–¢é€£ã—ãŸå®Ÿè·µçš„ãªå•é¡Œã§ã™ã€‚

## å•é¡Œï¼š
å•†å“ã‚³ãƒ¼ãƒ‰ã®å½¢å¼ãƒã‚§ãƒƒã‚¯ã¨å¤‰æ›ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã®ä»•æ§˜ã«å¾“ã£ã¦ã€å•†å“ã‚³ãƒ¼ãƒ‰ã®å‡¦ç†ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚

### å•†å“ã‚³ãƒ¼ãƒ‰ã®ä»•æ§˜ï¼š
- ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: "AA-999-XX"
    - æœ€åˆã®2æ–‡å­—: ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆå¤§æ–‡å­—
    - ä¸­å¤®ã®3æ–‡å­—: æ•°å­—
    - æœ€å¾Œã®2æ–‡å­—: ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆå¤§æ–‡å­—
    - åŒºåˆ‡ã‚Šæ–‡å­—: ãƒã‚¤ãƒ•ãƒ³ï¼ˆ-ï¼‰

### è¦ä»¶ï¼š
1. å•†å“ã‚³ãƒ¼ãƒ‰ãŒæ­£ã—ã„å½¢å¼ã‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰
2. å°æ–‡å­—ã§å…¥åŠ›ã•ã‚ŒãŸå ´åˆã¯å¤§æ–‡å­—ã«å¤‰æ›
3. ã‚¹ãƒšãƒ¼ã‚¹ãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã¯å‰Šé™¤
4. ãƒã‚¤ãƒ•ãƒ³ãŒå…¥åŠ›ã•ã‚Œã¦ã„ãªã„å ´åˆã¯é©åˆ‡ãªä½ç½®ã«ãƒã‚¤ãƒ•ãƒ³ã‚’æŒ¿å…¥

### å…¥åŠ›ä¾‹:
```
"AB-123-XY"    -> æ­£ã—ã„å½¢å¼
"ab-123-xy"    -> å¤§æ–‡å­—ã«å¤‰æ›ãŒå¿…è¦
"AB123XY"      -> ãƒã‚¤ãƒ•ãƒ³æŒ¿å…¥ãŒå¿…è¦
"AB -123- XY"  -> ã‚¹ãƒšãƒ¼ã‚¹å‰Šé™¤ãŒå¿…è¦
"A1-123-XY"    -> ä¸æ­£ãªå½¢å¼
```

æ¬¡ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ï¼š
```java
public class ProductCodeFormatter {
    // å•†å“ã‚³ãƒ¼ãƒ‰ãŒæ­£ã—ã„å½¢å¼ã‹ãƒã‚§ãƒƒã‚¯
    public static boolean isValidFormat(String code) {
        // å®Ÿè£…ã—ã¦ãã ã•ã„
    }

    // å•†å“ã‚³ãƒ¼ãƒ‰ã‚’æ­£ã—ã„å½¢å¼ã«å¤‰æ›
    public static String formatCode(String code) {
        // å®Ÿè£…ã—ã¦ãã ã•ã„
    }
}
```

åŸºæœ¬çš„ãªæ–‡å­—åˆ—æ“ä½œã®ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆ`toUpperCase()`, `trim()`, `replaceAll()`, `substring()` ãªã©ï¼‰ã‚’ä½¿ç”¨ã—ã¦å®Ÿè£…ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

ã“ã®å•é¡Œã¯10-15åˆ†ç¨‹åº¦ã§è§£ã‘ã‚‹ã¯ãšã§ã™ã€‚æº–å‚™ãŒã§ããŸã‚‰å®Ÿè£…ã‚’å§‹ã‚ã¦ãã ã•ã„ã€‚

è‰¯ã„å®Ÿè£…ã§ã™ã­ã€‚ã„ãã¤ã‹ã®å„ªã‚ŒãŸãƒã‚¤ãƒ³ãƒˆã¨ã€ã•ã‚‰ã«æ”¹å–„ã§ãã‚‹ç‚¹ã«ã¤ã„ã¦èª¬æ˜ã•ã›ã¦ã„ãŸã ãã¾ã™ï¼š

### å„ªã‚Œã¦ã„ã‚‹ç‚¹ ğŸ‘

1. **å®šæ•°ã®æ´»ç”¨**
  - æ­£è¦è¡¨ç¾ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å®šæ•°ã¨ã—ã¦å®šç¾©
  - ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ¸ˆã¿ã®Patternã‚’å†åˆ©ç”¨

2. **æ®µéšçš„ãªå‡¦ç†**
  - æ—¢ã«æ­£ã—ã„å½¢å¼ã‹ãƒã‚§ãƒƒã‚¯
  - ã‚¹ãƒšãƒ¼ã‚¹å‰Šé™¤ã¨å¤§æ–‡å­—å¤‰æ›
  - ãƒã‚¤ãƒ•ãƒ³è¿½åŠ 
    ã¨ã„ã†è«–ç†çš„ãªæµã‚Œã§å®Ÿè£…

3. **æ­£è¦è¡¨ç¾ã®æ´»ç”¨**
  - 2ã¤ã®ç•°ãªã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨ï¼ˆãƒã‚¤ãƒ•ãƒ³ã‚ã‚Š/ãªã—ï¼‰
  - `\\s+` ã§ã®ç©ºç™½æ–‡å­—ã®é™¤å»

### æ”¹å–„ã§ãã‚‹ç‚¹ ğŸ”§

1. **ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®æ˜ç¢ºåŒ–**
```java
public static String formatCode(String code) {
    if (code == null) {
        return null;
    }
    // ... æ®‹ã‚Šã®å®Ÿè£…
}
```

2. **ãƒ¡ã‚½ãƒƒãƒ‰ã®åˆ†å‰²**
```java
private static String removeNonAlphanumeric(String code) {
    return code.replaceAll("[^A-Z0-9]", "");
}

private static String insertHyphens(String code) {
    StringBuilder sb = new StringBuilder(code);
    sb.insert(2, "-");
    sb.insert(6, "-");
    return sb.toString();
}
```

3. **ã‚³ãƒ¡ãƒ³ãƒˆã®è¿½åŠ **
```java
/** æ­£è¦è¡¨ç¾ï¼šAA-999-XXå½¢å¼ï¼ˆãƒã‚¤ãƒ•ãƒ³ã‚ã‚Šï¼‰ */
private final static String VALID_FORMAT = "^[A-Z]{2}-[0-9]{3}-[A-Z]{2}$";

/** æ­£è¦è¡¨ç¾ï¼šAA999XXå½¢å¼ï¼ˆãƒã‚¤ãƒ•ãƒ³ãªã—ï¼‰ */
private final static String NEARLY_VALID_FORMAT = "^[A-Z]{2}[0-9]{3}[A-Z]{2}$";
```

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹æ¡ˆ

```java
@Test
public void testFormatCode() {
    assertEquals("AB-123-XY", ProductCodeFormatter.formatCode("AB-123-XY"));
    assertEquals("AB-123-XY", ProductCodeFormatter.formatCode("ab-123-xy"));
    assertEquals("AB-123-XY", ProductCodeFormatter.formatCode("AB123XY"));
    assertEquals("AB-123-XY", ProductCodeFormatter.formatCode("AB 123 XY"));
    assertNull(ProductCodeFormatter.formatCode("A1-123-XY"));
    assertNull(ProductCodeFormatter.formatCode(null));
}
```

ç·ã˜ã¦ã€åŸºæœ¬çš„ãªæ–‡å­—åˆ—æ“ä½œã®çŸ¥è­˜ã‚’æ´»ã‹ã—ãŸè‰¯ã„å®Ÿè£…ãŒã§ãã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚æ­£è¦è¡¨ç¾ã‚’ä½¿ç”¨ã—ãŸæ¤œè¨¼ã¨StringBuilderã‚’ä½¿ç”¨ã—ãŸæ–‡å­—åˆ—æ“ä½œã®çµ„ã¿åˆã‚ã›ãŒåŠ¹æœçš„ã§ã™ã€‚

--å®Ÿéš›30åˆ†ãã‚‰ã„èª¿ã¹ãªãŒã‚‰æ›¸ã„ãŸã€‚ã¾ã ã¾ã ç”˜ã„ã€‚  